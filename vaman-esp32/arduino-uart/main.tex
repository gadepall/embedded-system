\section{Flash Vaman-ESP32 Using Arduino}
\subsection{Connections}
\begin{enumerate}
\item Make sure that Vaman board do not power any devices.  
\item Make connections as shown in \autoref{tab:arduino-uart}.
	%and \autoref{fig:vaman/uart/1}. 
\item The Vaman pin diagram is available in \autoref{fig:vaman-pin_sheet}.
	\iffalse
\begin{figure}[!ht]
\centering
    \resizebox{\columnwidth}{!}{%
\input{vaman-esp32/arduino-uart/figs/circuit.tex}
	}
\caption{Circuit Connections}
\label{fig:vaman/uart/1}
\end{figure}
\fi
\begin{figure*}
\centering
\includegraphics[width=\columnwidth]{vaman-esp32/lcd/figs/pin_sheet.png}
\caption{Vaman pins.  Right side reperesents ESP32 and left side M4-FPGA.}
\label{fig:vaman-pin_sheet}
\end{figure*}
\begin{table}[!ht]
\input{vaman-esp32/arduino-uart/tables/rpi-vaman-uart.tex}
\caption{}
\label{tab:arduino-uart}
\end{table}
\end{enumerate}
\subsection{Building and Flashing}
\begin{enumerate}
\item For compiling and genrating the bin file, make sure that the
platformio.ini file contains these lines.
\begin{lstlisting}
[env:esp32doit-devkit-v1]
platform = espressif32
board = esp32doit-devkit-v1
framework = arduino
platform_packages = toolchain-xtensa-esp32@https://github.com/esphome/esphome-docker-base/releases/download/v1.4.0/toolchain-xtensa32.tar.gz                             
framework-arduinoespressif32@<3.10006.210326
\end{lstlisting}
\item For uploading bin file to Vaman through ArduinoDroid application:
\begin{enumerate}
    \item Open the ArduinoDroid application.
    \item Click the three dots in the top right corner.
    \item Navigate to Settings $\rightarrow$ Board Type.
    \item Select ESP32 $\rightarrow$ DOIT ESP32 DEVKIT V1.
    \item Change the upload speed to 115200.
    \item Upload the generated .bin file.
\end{enumerate}
\item While the dots are printed on the screen, disconnect the EN wire from GND.
Make sure that the Vaman board is not powering any device while flashing.  The
Vaman-ESP32 should now flash.
\item After flashing, disconnect pin 0 on Vaman-ESP32 from GND. Power on Vaman
appropriately.
\end{enumerate}
